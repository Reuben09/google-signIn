<html lang="en">
  <head>
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="1002294605425-1qoa9kbsesa8428ic050hdp2igdisg42.apps.googleusercontent.com">
    
    <script src="https://accounts.google.com/gsi/client" async></script>

  </head>
  <body>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        
  var googleSignInDiv = document.getElementById("google");
  googleSignInDiv.style.display = "none";
function handleCredentialResponse(response) {
  console.log("Google Sign-In response:", response.credential);

  if (response.credential) {
    console.log("Sign-in successful. Displaying the protected div.");

    // Store user's credentials in sessionStorage
    sessionStorage.setItem("googleSignInToken", response.credential);

    // Show the protected div
    document.getElementById("protectedDiv").style.display = "block";
  } else {
    console.log("Sign-in failed or incomplete. Handle accordingly.");
    // Additional logic for handling failed sign-in
  }
}

function handleStoredCredentials() {
  // Check if there are stored credentials in sessionStorage
  var storedToken = sessionStorage.getItem("googleSignInToken");
  console.log(storedToken)

  if (storedToken) {
    // Handle the stored token (e.g., consider the user as signed in)
    console.log("User is signed in.");
    document.getElementById("protectedDiv").style.display = "block";

    // Redirect to the restricted page
    window.location.href = "https://yourdomain.com/restricted-page"; // Update with your actual URL
  }
}

// Check for stored credentials on page load
handleStoredCredentials();

google.accounts.id.initialize({
  client_id: "1002294605425-1qoa9kbsesa8428ic050hdp2igdisg42.apps.googleusercontent.com",
  callback: handleCredentialResponse
});

google.accounts.id.renderButton(
  document.getElementById("buttonDiv"),
  { theme: "outline", size: "large" }  // customization attributes
);

google.accounts.id.prompt();
}

);
    </script>

<div id="google">
    <div id="g_id_onload"
      data-client_id="1002294605425-1qoa9kbsesa8428ic050hdp2igdisg42.apps.googleusercontent.com"
      data-context="signin"
      data-ux_mode="popup"
      data-login_uri="https://reuben09-test.netlify.app/restricted-page"
      data-callback="handleCredentialResponse"
      data-nonce=""
      data-itp_support="true">
    </div>

    <div class="g_id_signin"
      data-type="standard"
      data-shape="rectangular"
      data-theme="outline"
      data-text="signin_with"
      data-size="large"
      data-display="none"
      data-logo_alignment="left">
    </div>
  </div>
    <!-- Protected div initially hidden -->
    <div id="protectedDiv" style="display: none;">
      <!-- Content of your protected div goes here -->
      <h1>This is the protected content!</h1>
    </div>

    <!-- YOUR WEBSITE CODE -->

  </body>
</html>
