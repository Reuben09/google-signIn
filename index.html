<html lang="en">
  <head>
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="1002294605425-1qoa9kbsesa8428ic050hdp2igdisg42.apps.googleusercontent.com">
    
    <script src="https://accounts.google.com/gsi/client" async></script>

  </head>
  <body>

    <script>
      function handleCredentialResponse(response) {
        console.log("Google Sign-In response:", response);
    
        // Assuming you have some logic to determine if sign-in is successful
        var isSignInSuccessful = true;
    
        if (isSignInSuccessful) {
          console.log("Sign-in successful. Displaying the protected div.");

          // Store user's credentials in localStorage
          localStorage.setItem("googleSignInCredentials", JSON.stringify(response.credential));
    
          // Show the protected div
          document.getElementById("protectedDiv").style.display = "block";
        }
      }

      function handleStoredCredentials() {
        // Check if there are stored credentials
        var storedCredentials = localStorage.getItem("googleSignInCredentials");
        
        if (storedCredentials) {
          // Parse stored credentials and handle them
          var parsedCredentials = JSON.parse(storedCredentials);
          handleCredentialResponse({ credential: parsedCredentials });
        } else{
          // Explicitly load the Google Sign-In library
      google.accounts.id.initialize({
        client_id: "1002294605425-1qoa9kbsesa8428ic050hdp2igdisg42.apps.googleusercontent.com",
        callback: handleCredentialResponse
      });

        }
      }
    

      // Check for stored credentials on page load
      handleStoredCredentials();
    
      google.accounts.id.renderButton(
        document.getElementById("buttonDiv"),
        { theme: "outline", size: "large" }  // customization attributes
      );
    
      google.accounts.id.prompt(); // also display the One Tap dialog
    </script>

    <div id="g_id_onload"
      data-client_id="1002294605425-1qoa9kbsesa8428ic050hdp2igdisg42.apps.googleusercontent.com"
      data-context="signin"
      data-ux_mode="popup"
      data-login_uri="https://reuben09-test.netlify.app/restricted-page"
      data-callback="handleCredentialResponse"
      data-nonce=""
      data-itp_support="true">
    </div>

    <div class="g_id_signin"
      data-type="standard"
      data-shape="rectangular"
      data-theme="outline"
      data-text="signin_with"
      data-size="large"
      data-logo_alignment="left">
    </div>

    <!-- Protected div initially hidden -->
    <div id="protectedDiv" style="display: none;">
      <!-- Content of your protected div goes here -->
      <h1>This is the protected content!</h1>
    </div>

    <!-- YOUR WEBSITE CODE -->
    <a href="restricted-page.html">check</a>
  </body>
</html>
